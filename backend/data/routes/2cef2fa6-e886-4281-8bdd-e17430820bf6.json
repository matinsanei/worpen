{
  "id": "2cef2fa6-e886-4281-8bdd-e17430820bf6",
  "name": "final_ws_chat_ui",
  "description": "",
  "path": "/app/realtime",
  "method": "GET",
  "route_type": "http",
  "logic": [
    {
      "set": {
        "var": "ui_html",
        "value": "<!DOCTYPE html><html dir='rtl' lang='fa'><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width, initial-scale=1.0'><title>Worpen Live</title><style>*{box-sizing:border-box}body{background:#0d1117;color:#c9d1d9;font-family:'Segoe UI',Tahoma,sans-serif;margin:0;display:flex;flex-direction:column;height:100vh;overflow:hidden}.chat-container{flex:1;display:flex;flex-direction:column;max-width:800px;margin:0 auto;width:100%;border-left:1px solid #30363d;border-right:1px solid #30363d;background:#010409}.header{padding:15px;background:#161b22;border-bottom:1px solid #30363d;display:flex;align-items:center;justify-content:space-between}.status{font-size:0.8rem;color:#7ee787;display:flex;align-items:center;gap:5px}#messages{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:10px}#messages::-webkit-scrollbar{width:8px}#messages::-webkit-scrollbar-thumb{background:#30363d;border-radius:4px}.msg{background:#161b22;padding:10px 15px;border-radius:8px;border:1px solid #30363d;animation:fadeIn 0.2s ease}.msg.sys{background:#3d1c1c;color:#ffa1a1;border-color:#5c2424;font-size:0.9rem}.msg.join{background:#1c3d23;color:#7ee787;border-color:#265c33;font-size:0.9rem}.sender{color:#58a6ff;font-weight:bold;margin-left:5px;font-size:0.85rem}.input-area{padding:15px;background:#161b22;border-top:1px solid #30363d;display:flex;gap:10px}.field{flex:1;background:#0d1117;border:1px solid #30363d;color:white;padding:12px;border-radius:6px;outline:none}.field:focus{border-color:#58a6ff}.btn{background:#238636;color:white;border:none;padding:0 25px;border-radius:6px;font-weight:bold;cursor:pointer}.btn:hover{background:#2ea043}@keyframes fadeIn{from{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}</style></head><body><div class='chat-container'><div class='header'><div>ðŸ’¬ Ú†Øª Ø±ÛŒÙ„â€ŒØªØ§ÛŒÙ… ÙˆÙˆØ±Ù¾Ù†</div><div id='status' class='status'>Connecting...</div></div><div id='messages'></div><div class='input-area'><input id='text' class='field' placeholder='Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯...' autofocus><button class='btn' onclick='send()'>Ø§Ø±Ø³Ø§Ù„</button></div></div><script>let ws;const msgs=document.getElementById('messages');const stat=document.getElementById('status');function connect(){const protocol=location.protocol==='https:'?'wss://':'ws://';ws=new WebSocket(protocol+location.host+'/api/chat/stream');ws.onopen=()=>{stat.innerText='ðŸŸ¢ Ù…ØªØµÙ„ (Realtime)';stat.style.color='#7ee787';};ws.onclose=()=>{stat.innerText='ðŸ”´ Ù‚Ø·Ø¹ Ø´Ø¯ (ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯...)';stat.style.color='#ff7b72';setTimeout(connect,2000);};ws.onmessage=(e)=>{const data=e.data;const div=document.createElement('div');if(data.includes('ÙˆØ§Ø±Ø¯ Ø´Ø¯')) div.className='msg join';else if(data.includes('Ù‚Ø·Ø¹ Ø´Ø¯')) div.className='msg sys';else div.className='msg';if(div.className==='msg'){const parts=data.split(': ');div.innerHTML=`<span class='sender'>${parts[0]}</span>: ${parts.slice(1).join(': ')}`;}else{div.innerText=data;}msgs.appendChild(div);msgs.scrollTop=msgs.scrollHeight;};}function send(){const input=document.getElementById('text');if(input.value.trim()){ws.send(input.value);input.value='';}}document.getElementById('text').addEventListener('keypress',(e)=>{if(e.key==='Enter')send()});connect();</script></body></html>"
      }
    },
    {
      "return": {
        "value": {
          "html": "{{ui_html}}",
          "status": 200
        }
      }
    }
  ],
  "ws_hooks": null,
  "parameters": [],
  "response_schema": null,
  "auth_required": false,
  "rate_limit": null,
  "enabled": true,
  "version": "1.0.0",
  "created_at": "2026-01-03T11:51:34.855650100+00:00",
  "updated_at": "2026-01-03T11:51:34.855650100+00:00",
  "created_by": "system"
}