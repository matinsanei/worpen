{
  "name": "physics_game",
  "path": "/game",
  "method": "GET",
  "description": "Interactive physics game with real-time backend calculations",
  "logic": [
    {
      "return": {
        "value": {
          "status": 200,
          "html": "<!DOCTYPE html><html><head><meta charset='UTF-8'><title>Physics Game - Worpen</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#1e3c72,#2a5298);min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;color:white}.container{text-align:center}.title{font-size:2.5em;margin-bottom:20px;text-shadow:2px 2px 4px rgba(0,0,0,0.5)}canvas{border:3px solid #fff;border-radius:10px;box-shadow:0 10px 40px rgba(0,0,0,0.5);background:#0a1128;cursor:crosshair}.stats{display:flex;gap:30px;margin-top:20px;justify-content:center}.stat{background:rgba(255,255,255,0.1);padding:15px 25px;border-radius:10px;backdrop-filter:blur(10px)}.stat-label{font-size:0.9em;opacity:0.8;margin-bottom:5px}.stat-value{font-size:1.8em;font-weight:bold}.controls{margin-top:20px;display:flex;gap:15px;justify-content:center}.btn{background:linear-gradient(135deg,#667eea,#764ba2);color:white;border:none;padding:12px 30px;font-size:1em;border-radius:25px;cursor:pointer;transition:all 0.3s;box-shadow:0 5px 15px rgba(0,0,0,0.3)}.btn:hover{transform:translateY(-2px);box-shadow:0 7px 20px rgba(0,0,0,0.4)}.btn:active{transform:translateY(0)}.status{margin-top:15px;font-size:1.1em;padding:10px;background:rgba(255,255,255,0.1);border-radius:8px;min-height:30px}</style></head><body><div class='container'><h1 class='title'>‚ö° Physics Engine Demo</h1><canvas id='canvas' width='800' height='600'></canvas><div class='stats'><div class='stat'><div class='stat-label'>FPS</div><div class='stat-value' id='fps'>60</div></div><div class='stat'><div class='stat-label'>API Calls</div><div class='stat-value' id='calls'>0</div></div><div class='stat'><div class='stat-label'>Avg Response</div><div class='stat-value' id='ping'>0ms</div></div><div class='stat'><div class='stat-label'>Total Time</div><div class='stat-value' id='total'>0s</div></div></div><div class='controls'><button class='btn' onclick='startGame()'>‚ñ∂ Start</button><button class='btn' onclick='pauseGame()'>‚è∏ Pause</button><button class='btn' onclick='resetGame()'>üîÑ Reset</button></div><div class='status' id='status'>Click START to begin physics simulation</div></div><script>const canvas=document.getElementById('canvas');const ctx=canvas.getContext('2d');let ball={x:400,y:300,vx:5,vy:3,radius:15,color:'#00ff88'};let hexagon={x:400,y:300,radius:150,rotation:0,sides:6,color:'#ff0088'};let running=false;let apiCalls=0;let totalResponseTime=0;let startTime=0;let lastFrame=0;let fps=60;function drawHexagon(){ctx.save();ctx.translate(hexagon.x,hexagon.y);ctx.rotate(hexagon.rotation);ctx.beginPath();for(let i=0;i<hexagon.sides;i++){const angle=(Math.PI*2/hexagon.sides)*i;const x=Math.cos(angle)*hexagon.radius;const y=Math.sin(angle)*hexagon.radius;if(i===0)ctx.moveTo(x,y);else ctx.lineTo(x,y);}ctx.closePath();ctx.strokeStyle=hexagon.color;ctx.lineWidth=4;ctx.stroke();ctx.shadowBlur=20;ctx.shadowColor=hexagon.color;ctx.stroke();ctx.restore();}function drawBall(){ctx.save();ctx.shadowBlur=15;ctx.shadowColor=ball.color;ctx.beginPath();ctx.arc(ball.x,ball.y,ball.radius,0,Math.PI*2);ctx.fillStyle=ball.color;ctx.fill();ctx.strokeStyle='#fff';ctx.lineWidth=2;ctx.stroke();ctx.restore();}let isCalculating=false;function calculatePhysics(){if(isCalculating)return;isCalculating=true;const reqStart=performance.now();fetch('/api/physics',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({ball_x:ball.x,ball_y:ball.y,ball_vx:ball.vx,ball_vy:ball.vy,ball_radius:ball.radius,hex_x:hexagon.x,hex_y:hexagon.y,hex_radius:hexagon.radius,hex_sides:hexagon.sides,hex_rotation:hexagon.rotation,canvas_width:canvas.width,canvas_height:canvas.height})}).then(res=>res.json()).then(data=>{const reqEnd=performance.now();const responseTime=reqEnd-reqStart;apiCalls++;totalResponseTime+=responseTime;document.getElementById('calls').textContent=apiCalls;document.getElementById('ping').textContent=responseTime.toFixed(1)+'ms';document.getElementById('status').textContent=data.message||'Backend connected!';isCalculating=false;}).catch(error=>{document.getElementById('status').textContent='Local physics mode';isCalculating=false;});}let frameCount=0;function checkHexCollision(){const dx=ball.x-hexagon.x;const dy=ball.y-hexagon.y;const dist=Math.sqrt(dx*dx+dy*dy);if(dist+ball.radius>hexagon.radius){const angle=Math.atan2(dy,dx);const targetX=hexagon.x+Math.cos(angle)*(hexagon.radius-ball.radius);const targetY=hexagon.y+Math.sin(angle)*(hexagon.radius-ball.radius);ball.x=targetX;ball.y=targetY;const normalX=dx/dist;const normalY=dy/dist;const dotProduct=ball.vx*normalX+ball.vy*normalY;ball.vx=ball.vx-2*dotProduct*normalX;ball.vy=ball.vy-2*dotProduct*normalY;ball.vx*=0.98;ball.vy*=0.98;ball.color='#ffff00';setTimeout(()=>ball.color='#00ff88',100);}}function animate(currentTime){if(!running)return;const delta=currentTime-lastFrame;if(delta>=16){fps=Math.round(1000/delta);document.getElementById('fps').textContent=fps;ctx.fillStyle='#0a1128';ctx.fillRect(0,0,canvas.width,canvas.height);ball.x+=ball.vx;ball.y+=ball.vy;if(ball.x-ball.radius<0||ball.x+ball.radius>canvas.width){ball.vx*=-1;ball.x=ball.x<400?ball.radius:canvas.width-ball.radius;}if(ball.y-ball.radius<0||ball.y+ball.radius>canvas.height){ball.vy*=-1;ball.y=ball.y<300?ball.radius:canvas.height-ball.radius;}checkHexCollision();hexagon.rotation+=0.01;drawHexagon();drawBall();frameCount++;if(frameCount%60===0){calculatePhysics();}const elapsed=((performance.now()-startTime)/1000).toFixed(1);document.getElementById('total').textContent=elapsed+'s';lastFrame=currentTime;}requestAnimationFrame(animate);}function startGame(){if(!running){running=true;if(startTime===0)startTime=performance.now();lastFrame=performance.now();requestAnimationFrame(animate);document.getElementById('status').textContent='Game started! Watch the physics...';}}function pauseGame(){running=false;document.getElementById('status').textContent='Game paused';}function resetGame(){running=false;ball={x:400,y:300,vx:5,vy:3,radius:15,color:'#00ff88'};hexagon={x:400,y:300,radius:150,rotation:0,sides:6,color:'#ff0088'};apiCalls=0;totalResponseTime=0;startTime=0;document.getElementById('calls').textContent='0';document.getElementById('ping').textContent='0ms';document.getElementById('total').textContent='0s';ctx.fillStyle='#0a1128';ctx.fillRect(0,0,canvas.width,canvas.height);drawHexagon();drawBall();document.getElementById('status').textContent='Game reset - Click START to begin';}resetGame();</script></body></html>"
        }
      }
    }
  ],
  "enabled": true,
  "version": "1.0"
}
